// src/data/products.js
// Catalog data and helpers. Images are resolved via import.meta.glob by folder.

const imageGlobs = {
  tapping_tool: import.meta && import.meta.glob('../assets/images/tapping_tool/*', { eager: true, import: 'default', query: '?url' }),
  fertilizers: import.meta && import.meta.glob('../assets/images/fertilizers/*', { eager: true, import: 'default', query: '?url' }),
  protective: import.meta && import.meta.glob("../assets/images/gloves & boots/*", { eager: true, import: 'default', query: '?url' }),
  rpc: import.meta && import.meta.glob('../assets/images/rubber shades/*', { eager: true, import: 'default', query: '?url' }),
};

function pickFirst(globMap) {
  if (!globMap) return '';
  const first = Object.values(globMap)[0];
  return typeof first === 'string' ? first : '';
}

// Base categories
export const categories = [
  { id: 'tapping-tools', name: 'Tapping Tools' },
  { id: 'agrochemicals', name: 'Agrochemicals' },
  { id: 'protective-gear', name: 'Protective Gear' },
  { id: 'rpc', name: 'Rain Guarding Panels (RPCs)' },
];

// Seed products (can be replaced with API data later)
export const products = [
  {
    id: 'bh-rt-2500-machine',
    name: 'BH-RT-2500 Rubber Tapping Machine',
    category: 'tapping-tools',
    brand: 'Bholanath',
    price: 29050.0,
    popularity: 92,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('bh-rt-2500')) || Object.values(imageGlobs.tapping_tool || {})[0] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Model BH-RT-2500', 'Precision engineering', 'Industrial grade'],
    description: 'Professional rubber tapping machine model BH-RT-2500 for efficient tapping operations.',
  },
  {
    id: 'sharpening-stone',
    name: 'Sharpening Stone',
    category: 'tapping-tools',
    brand: 'SharpPro',
    price: 573.0,
    popularity: 80,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('Rubber-Tapping-Machine.png')) || Object.values(imageGlobs.tapping_tool || {})[1] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Dual-grit 400/1000'],
    description: 'Maintain razor-sharp edges for clean incisions.',
  },
  {
    id: 'bholanath-tapping-machine',
    name: 'Bholanath Stepper Motor Rubber Tapping Machine',
    category: 'tapping-tools',
    brand: 'Bholanath',
    price: 37350.0,
    popularity: 85,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('High-Efficient-Electric-Rubber-Tapping-Machine')) || Object.values(imageGlobs.tapping_tool || {})[2] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Stepper motor technology', 'Precision cutting', 'Industrial grade'],
    description: 'Advanced stepper motor rubber tapping machine for efficient and precise tapping operations.',
  },
  {
    id: 'bh-rt-2000-machine',
    name: 'BH-RT-2000 Rubber Tapping Machine',
    category: 'tapping-tools',
    brand: 'Bholanath',
    price: 31540.0,
    popularity: 82,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('bh-rt-2000')) || Object.values(imageGlobs.tapping_tool || {})[3] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Model BH-RT-2000', 'Heavy-duty construction', 'Precision engineering'],
    description: 'Professional rubber tapping machine model BH-RT-2000 for commercial operations.',
  },
  {
    id: 'bh-rt-3000-machine',
    name: 'BH-RT-3000 VT Rubber Tapping Machine',
    category: 'tapping-tools',
    brand: 'Bholanath',
    price: 43160.0,
    popularity: 90,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('bh-rt-3000')) || Object.values(imageGlobs.tapping_tool || {})[4] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Model BH-RT-3000 VT', 'Variable speed control', 'Advanced technology'],
    description: 'Latest BH-RT-3000 VT model with variable speed control for optimal tapping performance.',
  },
  {
    id: 'portable-tapping-machine',
    name: 'Portable Rubber Tree Tapping Machine',
    category: 'tapping-tools',
    brand: 'TreeTech',
    price: 320.0,
    popularity: 78,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('portable-rubber-tree-tapping-machine')) || Object.values(imageGlobs.tapping_tool || {})[5] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Portable design', 'Lightweight construction', 'Easy operation'],
    description: 'Portable rubber tree tapping machine for small to medium scale operations.',
  },
  {
    id: 'electric-tapping-machine-1',
    name: 'Electric Rubber Tapping Machine Model A',
    category: 'tapping-tools',
    brand: 'PrecisionTech',
    price: 280.0,
    popularity: 75,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('41aJbyCbLVL')) || Object.values(imageGlobs.tapping_tool || {})[6] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Electric motor', 'Precision cutting', 'Durable construction'],
    description: 'Electric rubber tapping machine with precision cutting technology for efficient operations.',
  },
  {
    id: 'electric-tapping-machine-2',
    name: 'Electric Rubber Tapping Machine Model B',
    category: 'tapping-tools',
    brand: 'PrecisionTech',
    price: 295.0,
    popularity: 80,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('41wTa5vcO6L')) || Object.values(imageGlobs.tapping_tool || {})[7] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Advanced motor', 'High efficiency', 'Professional grade'],
    description: 'Advanced electric rubber tapping machine for professional rubber cultivation.',
  },
  {
    id: 'precision-tapping-machine',
    name: 'Precision Rubber Tapping Machine',
    category: 'tapping-tools',
    brand: 'Bholanath',
    price: 420.0,
    popularity: 87,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('4cba6eedf80dee4152e06c434f4e1b0c')) || Object.values(imageGlobs.tapping_tool || {})[6] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Precision engineering', 'Stepper motor', 'Industrial grade'],
    description: 'High-precision rubber tapping machine with stepper motor technology.',
  },
  {
    id: 'industrial-tapping-machine',
    name: 'Industrial Rubber Tapping Machine',
    category: 'tapping-tools',
    brand: 'IndustrialPro',
    price: 550.0,
    popularity: 92,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('51E7UARsBBL')) || Object.values(imageGlobs.tapping_tool || {})[7] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Heavy-duty design', 'Industrial motor', 'High capacity'],
    description: 'Heavy-duty industrial rubber tapping machine for large-scale operations.',
  },
  {
    id: 'compact-tapping-machine',
    name: 'Compact Rubber Tapping Machine',
    category: 'tapping-tools',
    brand: 'CompactPro',
    price: 14940.0,
    popularity: 70,
    image: Object.values(imageGlobs.tapping_tool || {}).find(img => img.includes('e598e7b51c37e313755da41de972c986')) || Object.values(imageGlobs.tapping_tool || {})[8] || pickFirst(imageGlobs.tapping_tool),
    images: Object.values(imageGlobs.tapping_tool || {}),
    specs: ['Compact design', 'Lightweight', 'Easy to use'],
    description: 'Compact rubber tapping machine for small-scale rubber cultivation.',
  },
  {
    id: 'humic-acid-fertilizer',
    name: 'Humic Acid Granular Fertilizer',
    category: 'agrochemicals',
    brand: 'VigoHibong',
    price: 28.0,
    popularity: 88,
    image: Object.values(imageGlobs.fertilizers || {}).find(img => img.includes('Humus-Leonardite-Organic-Fertilizer')) || Object.values(imageGlobs.fertilizers || {})[0] || pickFirst(imageGlobs.fertilizers),
    images: Object.values(imageGlobs.fertilizers || {}),
    specs: ['Organic humic acid', 'Granular form', 'Soil conditioner'],
    description: 'Organic humic acid granular fertilizer for improved soil health and plant growth.',
  },
  {
    id: 'vermi-compost',
    name: 'Vermi Compost',
    category: 'agrochemicals',
    brand: 'Abiec',
    price: 996.0,
    popularity: 85,
    image: Object.values(imageGlobs.fertilizers || {}).find(img => img.includes('abtec-vermi-compost-1-kg-500x500')) || Object.values(imageGlobs.fertilizers || {})[1] || pickFirst(imageGlobs.fertilizers),
    images: Object.values(imageGlobs.fertilizers || {}),
    specs: ['Organic compost', '1kg net weight', 'Natural nutrients'],
    description: 'Pure organic vermi compost for natural soil enrichment and plant nutrition.',
  },
  {
    id: 'cow-dung-fertilizer',
    name: 'Pure Cowdung Fertilizer',
    category: 'agrochemicals',
    brand: 'Abiec',
    price: 664.0,
    popularity: 82,
    image: Object.values(imageGlobs.fertilizers || {}).find(img => img.includes('cow-dung-white-bg-430x430')) || Object.values(imageGlobs.fertilizers || {})[2] || pickFirst(imageGlobs.fertilizers),
    images: Object.values(imageGlobs.fertilizers || {}),
    specs: ['100% natural', 'Pure cowdung', 'Home & kitchen garden'],
    description: 'Pure cowdung fertilizer for home and kitchen garden applications.',
  },
  {
    id: 'bio-organic-rubber',
    name: 'Bio Organic Rubber Fertilizer',
    category: 'agrochemicals',
    brand: 'Abtec',
    price: 2905.0,
    popularity: 90,
    image: Object.values(imageGlobs.fertilizers || {}).find(img => img.includes('bio-organic-rubber-50kg')) || Object.values(imageGlobs.fertilizers || {})[0] || pickFirst(imageGlobs.fertilizers),
    images: Object.values(imageGlobs.fertilizers || {}),
    specs: ['Bio fertilizers', 'Organic manure', '20 years experience'],
    description: 'Bio organic fertilizer specifically formulated for rubber tree cultivation.',
  },
  {
    id: 'phos-max-fertilizer',
    name: 'PHOS-MAX Fertilizer',
    category: 'agrochemicals',
    brand: 'Amruth Organic Fertilizers',
    price: 2324.0,
    popularity: 88,
    image: Object.values(imageGlobs.fertilizers || {}).find(img => img.includes('phos-max')) || Object.values(imageGlobs.fertilizers || {})[4] || pickFirst(imageGlobs.fertilizers),
    images: Object.values(imageGlobs.fertilizers || {}),
    specs: ['Phosphorous rich', 'Granular form', 'All crops'],
    description: 'Phosphorous rich granular fertilizer for enhanced plant growth and development.',
  },
  {
    id: 'phospho-bacteria',
    name: 'PHOSPHOBACTERIA',
    category: 'agrochemicals',
    brand: 'Abtec',
    price: 1245.0,
    popularity: 85,
    image: Object.values(imageGlobs.fertilizers || {}).find(img => img.includes('phospho-bacteria-1-kg-500x500')) || Object.values(imageGlobs.fertilizers || {})[5] || pickFirst(imageGlobs.fertilizers),
    images: Object.values(imageGlobs.fertilizers || {}),
    specs: ['Phosphate solubilizing bacteria', '2x10 cfu/gm min', 'For all crops'],
    description: 'Phosphate solubilizing bacteria for improved nutrient availability and plant growth.',
  },
  {
    id: 'gloves-rubber',
    name: 'Heavy-Duty Gloves',
    category: 'protective-gear',
    brand: 'SafeHands',
    price: 7.0,
    popularity: 70,
    image: Object.values(imageGlobs.protective || {}).find(img => img.includes('heavy-duty-rubber-gloves')) || Object.values(imageGlobs.protective || {})[0] || pickFirst(imageGlobs.protective),
    images: Object.values(imageGlobs.protective || {}),
    specs: ['Chemical resistant', 'Textured palm'],
    description: 'Protective gloves for handling agrochemicals and wet conditions.',
  },
  {
    id: 'red-protective-gloves',
    name: 'Red Protective Work Gloves',
    category: 'protective-gear',
    brand: 'TechnoGard',
    price: 996.0,
    popularity: 85,
    image: Object.values(imageGlobs.protective || {}).find(img => img.includes('kiwiglv2')) || Object.values(imageGlobs.protective || {})[1] || pickFirst(imageGlobs.protective),
    images: Object.values(imageGlobs.protective || {}),
    specs: ['EN388 certified', 'Chemical resistant', 'Made in Sri Lanka'],
    description: 'Professional red protective work gloves with EN388 certification for industrial use.',
  },
  {
    id: 'yellow-chemical-gloves',
    name: 'Yellow Chemical Resistant Gloves',
    category: 'protective-gear',
    brand: 'Ansell',
    price: 1245.0,
    popularity: 88,
    image: Object.values(imageGlobs.protective || {}).find(img => img.includes('ilife-chemical-resistant-latex')) || Object.values(imageGlobs.protective || {})[2] || pickFirst(imageGlobs.protective),
    images: Object.values(imageGlobs.protective || {}),
    specs: ['Latex rubber', 'Heavy-duty work', 'Industrial grade'],
    description: 'Heavy-duty yellow chemical resistant latex rubber gloves for laboratory and industrial use.',
  },
  {
    id: 'green-heavy-duty-gloves',
    name: 'Green Heavy-Duty Rubber Gloves',
    category: 'protective-gear',
    brand: 'WorkPro',
    price: 747.0,
    popularity: 82,
    image: Object.values(imageGlobs.protective || {}).find(img => img.includes('image_1024')) || Object.values(imageGlobs.protective || {})[3] || pickFirst(imageGlobs.protective),
    images: Object.values(imageGlobs.protective || {}),
    specs: ['Diamond pattern grip', 'Long cuff design', 'Chemical resistant'],
    description: 'Dark green heavy-duty rubber gloves with diamond pattern grip for enhanced traction.',
  },
  {
    id: 'rpc-panel',
    name: 'Rubber tree rain guard plastic sheet roll',
    category: 'rpc',
    brand: 'DryLeaf',
    price: 266.0,
    popularity: 95,
    image: pickFirst(imageGlobs.rpc),
    images: Object.values(imageGlobs.rpc || {}),
    specs: ['UV-stabilized polymer', 'Reusable'],
    description: 'Certified RPC to protect tapping panels during rainfall.',
    rpcCertified: true,
  },
  {
    id: 'rpc-panel-premium',
    name: 'Anchani tapping shades',
    category: 'rpc',
    brand: 'RainGuard',
    price: 374.0,
    popularity: 88,
    image: Object.values(imageGlobs.rpc || {})[1] || pickFirst(imageGlobs.rpc),
    images: Object.values(imageGlobs.rpc || {}),
    specs: ['Heavy-duty material', 'Extended durability', 'Weather resistant'],
    description: 'Premium rain protection cover for enhanced tapping panel protection.',
    rpcCertified: true,
  },
  {
    id: 'rpc-panel-eco',
    name: 'Eco-Friendly Rain Guard',
    category: 'rpc',
    brand: 'EcoShield',
    price: 315.0,
    popularity: 82,
    image: Object.values(imageGlobs.rpc || {})[2] || pickFirst(imageGlobs.rpc),
    images: Object.values(imageGlobs.rpc || {}),
    specs: ['Biodegradable material', 'Environmentally safe', 'Recyclable'],
    description: 'Eco-friendly rain guard made from sustainable materials.',
    rpcCertified: true,
  },
];

export function getProductById(id) {
  return products.find(p => p.id === id);
}

export function listBrands() {
  const set = new Set(products.map(p => p.brand));
  return Array.from(set).sort();
}

export function getRelatedProducts(currentProductId, limit = 3) {
  const currentProduct = getProductById(currentProductId);
  if (!currentProduct) return [];
  
  return products
    .filter(p => p.id !== currentProductId && p.category === currentProduct.category)
    .sort((a, b) => b.popularity - a.popularity)
    .slice(0, limit);
}


